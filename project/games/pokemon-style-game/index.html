<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monster Battle Adventure</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      font-family: 'Press Start 2P', cursive;
      box-sizing: border-box;
    }

    body {
      background-color: #1a1a2e;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    #gameWrapper {
      display: inline-block;
      position: relative;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
      border-radius: 10px;
      overflow: hidden;
    }

    canvas {
      display: block;
    }

    h1 {
      margin: 0;
    }

    button {
      border: 2px solid #333;
      cursor: pointer;
      font-size: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      transition: all 0.3s;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    #overlappingDiv {
      background-color: black;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      opacity: 0;
      pointer-events: none;
      z-index: 10;
    }

    #characterDialogueBox {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
      height: 140px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      border-top: 4px solid #333;
      display: none;
      padding: 20px;
      font-size: 14px;
      line-height: 1.6;
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);
      z-index: 5;
    }

    #userInterface {
      display: none;
    }

    .healthContainer {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
      border: 4px solid #333;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .healthContainer h1 {
      font-size: 14px;
      margin-bottom: 8px;
      color: #1a1a2e;
    }

    .healthBarContainer {
      position: relative;
      height: 8px;
      background-color: #e5e7eb;
      margin-top: 10px;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .healthBar {
      height: 100%;
      background: linear-gradient(90deg, #10b981 0%, #059669 100%);
      transition: width 0.3s ease;
      border-radius: 4px;
    }

    .healthBar.low {
      background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
    }

    .healthBar.critical {
      background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
      animation: healthPulse 0.5s infinite;
    }

    @keyframes healthPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    #enemyHealthContainer {
      width: 280px;
      position: absolute;
      top: 50px;
      left: 50px;
    }

    #playerHealthContainer {
      width: 280px;
      position: absolute;
      top: 330px;
      right: 50px;
    }

    #battleUI {
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
      height: 140px;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      border-top: 4px solid #333;
      display: flex;
      box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);
    }

    #dialogueBox {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
      padding: 20px;
      display: none;
      cursor: pointer;
      font-size: 14px;
      line-height: 1.6;
      color: #1a1a2e;
    }

    #attacksBox {
      width: 66.66%;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      padding: 10px;
    }

    #attacksBox button {
      min-height: 50px;
      font-size: 12px;
    }

    #attackTypeContainer {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 33.33%;
      border-left: 4px solid #333;
      background: linear-gradient(135deg, #f9fafb 0%, #e5e7eb 100%);
    }

    #attackType {
      font-size: 14px;
      text-align: center;
      color: #1a1a2e;
    }

    .instruction {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 10px;
      z-index: 100;
    }

    @media (max-width: 768px) {
      canvas {
        max-width: 100vw;
        height: auto;
      }

      .healthContainer {
        padding: 10px;
      }

      .healthContainer h1 {
        font-size: 10px;
      }

      #enemyHealthContainer,
      #playerHealthContainer {
        width: 200px;
      }

      #enemyHealthContainer {
        top: 30px;
        left: 30px;
      }

      #playerHealthContainer {
        top: auto;
        bottom: 160px;
        right: 30px;
      }

      button {
        font-size: 10px;
        padding: 8px 12px;
      }

      #attacksBox button {
        font-size: 10px;
        min-height: 40px;
      }

      #attackType {
        font-size: 10px;
      }

      #dialogueBox,
      #characterDialogueBox {
        font-size: 10px;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <div id="gameWrapper">
    <div id="overlappingDiv"></div>

    <canvas></canvas>

    <div id="characterDialogueBox"></div>

    <div id="userInterface">
      <div id="enemyHealthContainer" class="healthContainer">
        <h1>Draggle</h1>
        <div class="healthBarContainer">
          <div id="enemyHealthBar" class="healthBar"></div>
        </div>
      </div>

      <div id="playerHealthContainer" class="healthContainer">
        <h1>Emby</h1>
        <div class="healthBarContainer">
          <div id="playerHealthBar" class="healthBar"></div>
        </div>
      </div>

      <div id="battleUI">
        <div id="dialogueBox"></div>
        <div id="attacksBox"></div>
        <div id="attackTypeContainer">
          <h1 id="attackType">Attack Type</h1>
        </div>
      </div>
    </div>

    <div class="instruction">
      WASD to move | SPACE to interact
    </div>
  </div>

  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"
    integrity="sha512-6+YN/9o9BWrk6wSfGxQGpt3EUK6XeHi6yeHV+TYD2GR0Sj/cggRpXr1BrAQf0as6XslxomMUxXp2vIl+fv0QRA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"
    integrity="sha512-H6cPm97FAsgIKmlBA4s774vqoN24V5gSQL4yBTDOY2su2DeXZVhQPxFK4P6GPdnZqM9fg1G3cMv5wD7e6cFLZQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script src="data/audio.js"></script>
  <script src="data/battleZones.js"></script>
  <script src="data/collisions.js"></script>
  <script src="data/attacks.js"></script>
  <script src="data/monsters.js"></script>
  <script src="data/characters.js"></script>
  <script src="js/utils.js"></script>
  <script src="classes.js"></script>
  <script src="index.js"></script>
  <script src="battleScene.js"></script>
</body>
</html>
